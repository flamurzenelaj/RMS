{"remainingRequest":"C:\\Users\\jimmy\\OneDrive\\Desktop\\RMS\\RMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jimmy\\OneDrive\\Desktop\\RMS\\RMS\\src\\views\\AddNews.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\jimmy\\OneDrive\\Desktop\\RMS\\RMS\\src\\views\\AddNews.vue","mtime":1649512220689},{"path":"C:\\Users\\jimmy\\OneDrive\\Desktop\\RMS\\RMS\\node_modules\\css-loader\\dist\\cjs.js","mtime":1647724244576},{"path":"C:\\Users\\jimmy\\OneDrive\\Desktop\\RMS\\RMS\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1647724258600},{"path":"C:\\Users\\jimmy\\OneDrive\\Desktop\\RMS\\RMS\\node_modules\\postcss-loader\\src\\index.js","mtime":1647724252550},{"path":"C:\\Users\\jimmy\\OneDrive\\Desktop\\RMS\\RMS\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1647724256815},{"path":"C:\\Users\\jimmy\\OneDrive\\Desktop\\RMS\\RMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647724242346},{"path":"C:\\Users\\jimmy\\OneDrive\\Desktop\\RMS\\RMS\\node_modules\\vue-loader\\lib\\index.js","mtime":1647724258599}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmNyZWF0ZS1wb3N0IHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBoZWlnaHQ6IDEwMCU7DQoNCiAgYnV0dG9uIHsNCiAgICBtYXJnaW4tdG9wOiAwOw0KICB9DQoNCiAgLnJvdXRlci1idXR0b24gew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICBjb2xvcjogI2ZmZjsNCiAgfQ0KDQogIGxhYmVsLA0KICBidXR0b24sDQogIC5yb3V0ZXItYnV0dG9uIHsNCiAgICB0cmFuc2l0aW9uOiAwLjVzIGVhc2UtaW4tb3V0IGFsbDsNCiAgICBhbGlnbi1zZWxmOiBjZW50ZXI7DQogICAgZm9udC1zaXplOiAxNHB4Ow0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICBib3JkZXItcmFkaXVzOiAyMHB4Ow0KICAgIHBhZGRpbmc6IDEycHggMjRweDsNCiAgICBjb2xvcjogI2ZmZjsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzAzMDMwOw0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCg0KICAgICY6aG92ZXIgew0KICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg0OCwgNDgsIDQ4LCAwLjcpOw0KICAgIH0NCiAgfQ0KDQogIC5jb250YWluZXIgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgcGFkZGluZzogMTBweCAyNXB4IDYwcHg7DQogIH0NCg0KICAvLyBlcnJvciBzdHlsaW5nDQogIC5pbnZpc2libGUgew0KICAgIG9wYWNpdHk6IDAgIWltcG9ydGFudDsNCiAgfQ0KDQogIC5lcnItbWVzc2FnZSB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZzogMTJweDsNCiAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgY29sb3I6ICNmZmY7DQogICAgbWFyZ2luLWJvdHRvbTogMTBweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzAzMDMwOw0KICAgIG9wYWNpdHk6IDE7DQogICAgdHJhbnNpdGlvbjogMC41cyBlYXNlIGFsbDsNCg0KICAgIHAgew0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgIH0NCg0KICAgIHNwYW4gew0KICAgICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICB9DQogIH0NCg0KICAubmV3cy1pbmZvIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIG1hcmdpbi1ib3R0b206IDMycHg7DQoNCiAgICBpbnB1dDpudGgtY2hpbGQoMSkgew0KICAgICAgbWluLXdpZHRoOiAzMDBweDsNCiAgICB9DQoNCiAgICBpbnB1dCB7DQogICAgICB0cmFuc2l0aW9uOiAwLjVzIGVhc2UtaW4tb3V0IGFsbDsNCiAgICAgIHBhZGRpbmc6IDEwcHggNHB4Ow0KICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzMDMwMzA7DQoNCiAgICAgICY6Zm9jdXMgew0KICAgICAgICBvdXRsaW5lOiBub25lOw0KICAgICAgICBib3gtc2hhZG93OiAwIDFweCAwIDAgIzMwMzAzMDsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAudXBsb2FkLWZpbGUgew0KICAgICAgZmxleDogMTsNCiAgICAgIG1hcmdpbi1sZWZ0OiAxNnB4Ow0KICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgZGlzcGxheTogZmxleDsNCg0KICAgICAgaW5wdXQgew0KICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgfQ0KDQogICAgICAucHJldmlldyB7DQogICAgICAgIG1hcmdpbi1sZWZ0OiAxNnB4Ow0KICAgICAgICB0ZXh0LXRyYW5zZm9ybTogaW5pdGlhbDsNCiAgICAgIH0NCg0KICAgICAgc3BhbiB7DQogICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7DQogICAgICAgIGFsaWduLXNlbGY6IGNlbnRlcjsNCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICAuZWRpdG9yIHsNCiAgICBoZWlnaHQ6IDYwdmg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KDQogICAgLnF1aWxsV3JhcHBlciB7DQogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgIGhlaWdodDogMTAwJTsNCiAgICB9DQoNCiAgICAucWwtY29udGFpbmVyIHsNCiAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgb3ZlcmZsb3c6IHNjcm9sbDsNCiAgICB9DQoNCiAgICAucWwtZWRpdG9yIHsNCiAgICAgIHBhZGRpbmc6IDIwcHggMTZweCAzMHB4Ow0KICAgIH0NCiAgfQ0KDQogIC5uZXdzLWFjdGlvbnMgew0KICAgIG1hcmdpbi10b3A6IDMycHg7DQoNCiAgICBidXR0b24gew0KICAgICAgbWFyZ2luLXJpZ2h0OiAxNnB4Ow0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["AddNews.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4LA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"AddNews.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"create-post\">\r\n    <NewsCoverPreview v-show=\"this.$store.state.newsPhotoPreview\" />\r\n    <Loading v-show=\"loading\" />\r\n    <div class=\"container\">\r\n      <div :class=\"{ invisible: !error }\" class=\"err-message\">\r\n        <p><span>Error:</span>{{ this.errorMsg }}</p>\r\n      </div>\r\n      <div class=\"news-info\">\r\n        <input type=\"text\" placeholder=\"Enter News Title\" v-model=\"newsTitle\" />\r\n        <div class=\"upload-file\">\r\n          <label for=\"news-photo\">Upload Cover Photo</label>\r\n          <input\r\n            type=\"file\"\r\n            ref=\"newsPhoto\"\r\n            id=\"news-photo\"\r\n            @change=\"fileChange\"\r\n            accept=\".png, .jpg, ,jpeg\"\r\n          />\r\n          <button\r\n            @click=\"openPreview\"\r\n            class=\"preview\"\r\n            :class=\"{ 'button-inactive': !this.$store.state.newsPhotoFileURL }\"\r\n          >\r\n            Preview Photo\r\n          </button>\r\n          <span>File Chosen: {{ this.$store.state.newsPhotoName }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"editor\">\r\n        <vue-editor\r\n          :editorOptions=\"editorSettings\"\r\n          v-model=\"newsHTML\"\r\n          useCustomImageHandler\r\n          @image-added=\"imageHandler\"\r\n        />\r\n      </div>\r\n      <div class=\"news-actions\">\r\n        <button @click=\"uploadNews\">Publish News</button>\r\n        <router-link class=\"router-button\" :to=\"{ name: 'NewsPreview' }\"\r\n          >Post Preview</router-link\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NewsCoverPreview from \"../components/NewsCoverPreview\";\r\nimport Loading from \"../components/Loading\";\r\nimport firebase from \"firebase/compat/app\";\r\nimport \"firebase/compat/storage\";\r\nimport db from \"../firebase/firebaseInit\";\r\nimport Quill from \"quill\";\r\nwindow.Quill = Quill;\r\nconst ImageResize = require(\"quill-image-resize-module\").default;\r\nQuill.register(\"modules/imageResize\", ImageResize);\r\nexport default {\r\n  name: \"CreatePost\",\r\n  data() {\r\n    return {\r\n      file: null,\r\n      error: null,\r\n      errorMsg: null,\r\n      loading: null,\r\n      editorSettings: {\r\n        modules: {\r\n          imageResize: {},\r\n        },\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    NewsCoverPreview,\r\n    Loading,\r\n  },\r\n  methods: {\r\n    fileChange() {\r\n      this.file = this.$refs.newsPhoto.files[0];\r\n      const fileName = this.file.name;\r\n      this.$store.commit(\"fileNameChange\", fileName);\r\n      this.$store.commit(\"createFileURL\", URL.createObjectURL(this.file));\r\n    },\r\n\r\n    openPreview() {\r\n      this.$store.commit(\"openPhotoPreview\");\r\n    },\r\n\r\n    imageHandler(file, Editor, cursorLocation, resetUploader) {\r\n      const storageRef = firebase.storage().ref();\r\n      const docRef = storageRef.child(`documents/newsPostPhotos/${file.name}`);\r\n      docRef.put(file).on(\r\n        \"state_changed\",\r\n        (snapshot) => {\r\n          console.log(snapshot);\r\n        },\r\n        (err) => {\r\n          console.log(err);\r\n        },\r\n        async () => {\r\n          const downloadURL = await docRef.getDownloadURL();\r\n          Editor.insertEmbed(cursorLocation, \"image\", downloadURL);\r\n          resetUploader();\r\n        }\r\n      );\r\n    },\r\n\r\n    uploadNews() {\r\n      if (this.newsTitle.length !== 0 && this.newsHTML.length !== 0) {\r\n        if (this.file) {\r\n          this.loading = true;\r\n          const storageRef = firebase.storage().ref();\r\n          const docRef = storageRef.child(\r\n            `documents/newsCoverPhotos/${this.$store.state.newsPhotoName}`\r\n          );\r\n          docRef.put(this.file).on(\r\n            \"state_changed\",\r\n            (snapshot) => {\r\n              console.log(snapshot);\r\n            },\r\n            (err) => {\r\n              console.log(err);\r\n              this.loading = false;\r\n            },\r\n            async () => {\r\n              const downloadURL = await docRef.getDownloadURL();\r\n              const timestamp = await Date.now();\r\n              const dataBase = await db.collection(\"newsPosts\").doc();\r\n\r\n              await dataBase.set({\r\n                newsID: dataBase.id,\r\n                newsHTML: this.newsHTML,\r\n                newsCoverPhoto: downloadURL,\r\n                newsCoverPhotoName: this.newsCoverPhotoName,\r\n                newsTitle: this.newsTitle,\r\n                profileId: this.profileId,\r\n                date: timestamp,\r\n              });\r\n              await this.$store.dispatch(\"getPost\");\r\n              this.loading = false;\r\n              this.$router.go();\r\n            }\r\n          );\r\n          return;\r\n        }\r\n        this.error = true;\r\n        this.errorMsg = \"Please ensure you uploaded a cover photo!\";\r\n        setTimeout(() => {\r\n          this.error = false;\r\n        }, 5000);\r\n        return;\r\n      }\r\n      this.error = true;\r\n      this.errorMsg = \"Please ensure News Title & News Post has been filled!\";\r\n      setTimeout(() => {\r\n        this.error = false;\r\n      }, 5000);\r\n      return;\r\n    },\r\n  },\r\n  computed: {\r\n    profileId() {\r\n      return this.$store.state.profileId;\r\n    },\r\n    newsCoverPhotoName() {\r\n      return this.$store.state.newsPhotoName;\r\n    },\r\n    newsTitle: {\r\n      get() {\r\n        return this.$store.state.newsTitle;\r\n      },\r\n      set(payload) {\r\n        this.$store.commit(\"updatenewsTitle\", payload);\r\n      },\r\n    },\r\n    newsHTML: {\r\n      get() {\r\n        return this.$store.state.newsHTML;\r\n      },\r\n      set(payload) {\r\n        this.$store.commit(\"newNewsPost\", payload);\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.create-post {\r\n  position: relative;\r\n  height: 100%;\r\n\r\n  button {\r\n    margin-top: 0;\r\n  }\r\n\r\n  .router-button {\r\n    text-decoration: none;\r\n    color: #fff;\r\n  }\r\n\r\n  label,\r\n  button,\r\n  .router-button {\r\n    transition: 0.5s ease-in-out all;\r\n    align-self: center;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    border-radius: 20px;\r\n    padding: 12px 24px;\r\n    color: #fff;\r\n    background-color: #303030;\r\n    text-decoration: none;\r\n\r\n    &:hover {\r\n      background-color: rgba(48, 48, 48, 0.7);\r\n    }\r\n  }\r\n\r\n  .container {\r\n    position: relative;\r\n    height: 100%;\r\n    padding: 10px 25px 60px;\r\n  }\r\n\r\n  // error styling\r\n  .invisible {\r\n    opacity: 0 !important;\r\n  }\r\n\r\n  .err-message {\r\n    width: 100%;\r\n    padding: 12px;\r\n    border-radius: 8px;\r\n    color: #fff;\r\n    margin-bottom: 10px;\r\n    background-color: #303030;\r\n    opacity: 1;\r\n    transition: 0.5s ease all;\r\n\r\n    p {\r\n      font-size: 14px;\r\n    }\r\n\r\n    span {\r\n      font-weight: 600;\r\n    }\r\n  }\r\n\r\n  .news-info {\r\n    display: flex;\r\n    margin-bottom: 32px;\r\n\r\n    input:nth-child(1) {\r\n      min-width: 300px;\r\n    }\r\n\r\n    input {\r\n      transition: 0.5s ease-in-out all;\r\n      padding: 10px 4px;\r\n      border: none;\r\n      border-bottom: 1px solid #303030;\r\n\r\n      &:focus {\r\n        outline: none;\r\n        box-shadow: 0 1px 0 0 #303030;\r\n      }\r\n    }\r\n\r\n    .upload-file {\r\n      flex: 1;\r\n      margin-left: 16px;\r\n      position: relative;\r\n      display: flex;\r\n\r\n      input {\r\n        display: none;\r\n      }\r\n\r\n      .preview {\r\n        margin-left: 16px;\r\n        text-transform: initial;\r\n      }\r\n\r\n      span {\r\n        font-size: 12px;\r\n        margin-left: 16px;\r\n        align-self: center;\r\n      }\r\n    }\r\n  }\r\n\r\n  .editor {\r\n    height: 60vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    .quillWrapper {\r\n      position: relative;\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n    }\r\n\r\n    .ql-container {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n      overflow: scroll;\r\n    }\r\n\r\n    .ql-editor {\r\n      padding: 20px 16px 30px;\r\n    }\r\n  }\r\n\r\n  .news-actions {\r\n    margin-top: 32px;\r\n\r\n    button {\r\n      margin-right: 16px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}